<div #heroSection class="position-relative d-flex justify-content-center ">
  <img src="img/1.jpg" class="img-fluid w-100 banner-rounded " alt="Event Banner"
    style="max-height: 620px; object-fit: cover;">

  <!-- Event Card -->
  <div #eventCard
    class="position-absolute end-0 bg-white shadow rounded me-5 mt-5 smooth-card custom-card card border-0  "
    style="max-width: 100%; width: 375px;">

    <div
      class="bg-dark text-white p-5 rounded-top rounded-bottom text-center d-flex align-items-center justify-content-center"
      style="height: 130px;">
      <h3 class="m-0">{{ item.title }}</h3>
    </div>

    <div class="d-flex gap-2 align-items-center mt-3 ms-3">
      <span class="bg-light text-danger fs-6 p-2 d-inline-flex align-items-center rounded-3">
        <i class="bi bi-tag me-1"></i> {{ item.category }}
      </span>

      <span class="bg-light text-danger fs-6 p-2 d-inline-flex align-items-center rounded-3">
        <i class="bi bi-star-fill me-1 text-danger"></i> {{ item.rating }}
      </span>

      <span class="bg-light text-danger fs-6 p-2 d-inline-flex align-items-center rounded-3">
        <i class="bi bi-fire me-1"></i> {{item.word}}
      </span>
    </div>


    <div class="mx-2 px-3 py-1 mt-1">

      <h6 class="border-bottom py-2 d-flex align-items-center">
        <i class="bi bi-calendar3 fs-5 me-2"></i>
        <strong>{{ item.date }}</strong>
      </h6>

      <h6 class="border-bottom py-2 d-flex align-items-center">
        <i class="bi bi-geo-alt-fill fs-5 me-2"></i>
        <span>{{ item.location }}</span>
      </h6>

      <h6 class="border-bottom py-2 d-flex align-items-center">
        <i class="bi bi-cash-stack fs-5 me-2"></i>
        <span>Prices from <strong>${{ item.price }}</strong></span>
      </h6>


      <!-- Star Ratings -->
      <div class="text-center text-danger mb-2 fs-5">
        <ng-container *ngFor="let star of [].constructor(5); let i = index">
          <i class="bi" [ngClass]="{
                                                          'bi-star-fill': i < Math.floor(item.rating),
                                                          'bi-star-half': i === Math.floor(item.rating) && item.rating % 1 !== 0,
                                                          'bi-star': i >= Math.ceil(item.rating)
                                                        }"></i>
        </ng-container>
        <div class="text-muted small ms-1 fst-italic">Reviewed by {{ item.reviews }} people</div>
      </div>

      <div class="d-flex gap-2 justify-content-center mb-2 mt-2">
        <button
          class="btn btn-light badge fav-btn d-flex align-items-center w-50 justify-content-center py-3 fs-6 shadow"
          (click)="toggleFavorite(item)">
          <span class="text-danger">Add to Wishlist </span>
          <i class="bi ms-2" [ngClass]="item.isFavorite ? 'bi-heart-fill text-danger' : 'bi-heart text-danger'"></i>
        </button>

        <button
          class="btn btn-light badge text-danger d-flex align-items-center w-50 justify-content-center fs-6 shadow"
          (click)="shareItem(item)">
          Share it <i class="bi bi-share-fill ms-2"></i>
        </button>
      </div>

      <a class="btn btn-danger w-100 mt-2 py-2 fs-5 mb-2"><i class="bi bi-ticket-perforated"></i> GET TICKET</a>
    </div>
  </div>

</div>



<div class="px-5 py-2">
  <div class="tab-links" #tabLinks>
    <a href="#overview" (click)="scrollToSection($event, 'overview')" class="active fs-5">
      <i class="bi bi-info-circle-fill me-1"></i>Overview
    </a>

    <a href="#location" (click)="scrollToSection($event, 'location')" class="fs-5">
      <i class="bi bi-geo-alt-fill me-2"></i>Location
    </a>

    <a href="#schedule" (click)="scrollToSection($event, 'schedule')" class="fs-5">
      <i class="bi bi-calendar3 me-1"></i>
      Schedule
    </a>

    <a href="#tickets" (click)="scrollToSection($event, 'tickets')" class="fs-5">
      <i class="bi bi-ticket-detailed-fill me-1" style="font-size: 17px;"></i>
      Tickets
    </a>

    <a href="#cast" (click)="scrollToSection($event, 'cast')" class="fs-5">Cast</a>

    <a href="#terms-conditions" (click)="scrollToSection($event, 'terms-conditions')" class="fs-5">
      <i class="bi bi-file-text me-1"></i>
      Terms & Conditions
    </a>

    <a href="#reviews" (click)="scrollToSection($event, 'reviews')" class="fs-5">Reviews</a>
  </div>


  <section id="overview" class="mt-3 p-2">
    <!-- Section Title -->
    <h2 class="mb-3">
      <i class="bi bi-info-circle-fill text-danger me-2"></i>
      <span class="heading-line">Overview</span>
    </h2>

    <div class="ps-5">
      <!-- Subtitle Before Description -->
      <h4>
        <i class="bi bi-lightbulb-fill me-2"></i> Get to know more about this event
      </h4>

      <!-- Description -->
      <p class="lead ms-3 text-justify fw-light fst-italic">
        {{ showMore ? item.description : (item.description | slice:0:200) + '...' }}
      </p>

      <!-- Show More / Show Less Button -->
      <button class="btn btn-light text-danger me-2" (click)="showMore = !showMore">
        <i class="bi" [ngClass]="showMore ? 'bi-chevron-up' : 'bi-chevron-down'"></i>
        {{ showMore ? 'Show Less' : 'Show More' }}
      </button>


      <hr class="mt-4">
    </div>
  </section>


  <section id="location" class="p-2">
    <!-- Section Title -->
    <h2 class="mb-3">
      <i class="bi bi-geo-alt-fill text-danger me-2"></i>
      <span class="heading-line">Location</span>
    </h2>

    <div class="ps-5">
      <!-- Subtitle Before Description -->
      <h4>
        <i class="bi bi-map me-2"></i> Check out the venue on the map
      </h4>

      <!-- Flexbox Container for Location & Map -->
      <div class="d-flex align-items-start mt-2 mb-4">

        <!-- Buttons: Hide Map & Share Location -->
        <div class="mt-3">
          <button class="btn btn-light text-danger me-2" (click)="toggleMap()">
            <i class="bi" [ngClass]="isMapVisible ? 'bi-eye-slash' : 'bi-eye'"></i>
            {{ isMapVisible ? 'Hide Map' : 'Show Map' }}
          </button>

          <!-- Share Location Button -->
          <button class="btn bg-danger text-white" (click)="openShareModal()">
            <i class="bi bi-share-fill"></i> Share Location
          </button>

          <!-- Bootstrap Modal -->
          <div class="modal fade" id="shareLocationModal" tabindex="-1" aria-labelledby="shareLocationModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="shareLocationModalLabel">Share Location</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <p>Copy the link below to share the location:</p>
                  <input type="text" class="form-control" [value]="locationUrl" readonly>
                </div>
                <div class="modal-footer">
                  <button class="btn bg-danger text-white" (click)="copyToClipboard()">Copy Link</button>
                  <button type="button" class="btn btn-light text-danger" data-bs-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>


        </div>
      </div>


      <app-leaflet-map *ngIf="isMapVisible" [locationName]="item.fullLocation" [styleTxt]="{
    'height': '350px',
    'width': '85%',
    'display': 'block',
    'margin-left': '15px'
  }">
        <!-- 'margin': '0 auto' -->
      </app-leaflet-map>

      <hr class="mt-4">
    </div>
  </section>


  <section id="schedule" class="p-2">
    <!-- Section Title with Icon -->
    <h2 class="mb-3">
      <i class="bi bi-calendar3 text-danger me-2"></i>
      <span class="heading-line">Schedule</span>
    </h2>

    <div class="ps-5">
      <!-- Subtitle Before Table -->
      <h4 class="mt-3">
        <i class="bi bi-hourglass-split me-2"></i> Check the event schedule below
      </h4>

      <!-- Schedule Table with Scroll -->
      <div class="schedule-table text-center" [class.scrollable]="schedules.length > 4">
        <!-- Table Header (Centered) -->
        <div class="schedule-header p-2 d-flex justify-content-center gap-4">
          <span><i class="bi bi-calendar-event me-2"></i> Day</span>
          <span><i class="bi bi-calendar-date me-2"></i> Date</span>
          <span><i class="bi bi-clock me-2"></i> Time</span>
        </div>

        <!-- Table Rows -->
        <div *ngFor="let item of schedules" class="schedule-row p-2 d-flex justify-content-center gap-4">
          <span>{{ item.day }}</span>
          <span>{{ item.date | date:'dd-MM-yyyy' }}</span>
          <span>{{ item.time }}</span>
        </div>
      </div>

      <hr class="mt-4">
    </div>
  </section>


  <section id="tickets" class="p-4">
    <div class="container-fluid">
      <!-- Section Heading -->
      <h2 class="mb-4">
        <i class="bi bi-ticket-detailed-fill text-danger me-2"></i>
        <span class="heading-line">Tickets</span>
      </h2>

      <div>

        <!-- Choose Your Ticket with Buttons on the Right -->
        <div class="d-flex justify-content-between align-items-center mt-3 ps-4 pe-4">
          <h4>
            <i class="bi bi-cart-check-fill me-2"></i> Choose Your Ticket
            <span class="text-muted ms-2 fs-5">({{ tickets.length }} Types Available)</span>
          </h4>
          <div class="me-5">
            <button class="btn btn-danger me-2" (click)="scrollLeftTicket()" [disabled]="!canScrollLeft">
              <i class="bi bi bi-chevron-left text-white fs-5"></i>
            </button>

            <button class="btn btn-danger" (click)="scrollRightTicket()" [disabled]="!canScrollRight">
              <i class="bi bi-chevron-right text-white fs-5"></i>
            </button>
          </div>
        </div>


        <!-- Scrollable Ticket List -->
        <div class="d-flex justify-content-start align-items-center overflow-hidden pe-5 ms-2">
          <div #ticketContainer class="d-flex gap-3 scroll-container pb-2"
            style="max-width: 100%; overflow-x: auto; white-space: nowrap; scroll-behavior: smooth; padding-left: 1rem;">

            <div *ngFor="let ticket of tickets" class="card ticket-card border-0 shadow-sm flex-shrink-0"
              style="min-width: 250px; border-radius: 10px;">

              <div class="card-body d-flex flex-column justify-content-between p-3">
                <!-- Ticket Type with Icon -->
                <h5 class="fw-bold text-danger d-flex align-items-center">
                  <i class="bi bi-ticket-perforated-fill me-2 fs-4"></i> {{ ticket.type }}
                </h5>

                <!-- Description -->
                <div class="text-muted mb-2 py-1">{{ ticket.description }}</div>

                <!-- Price Badge -->
                <div class="d-flex justify-content-between align-items-center">
                  <span class="badge bg-danger text-white py-2 px-2 fs-6">{{ ticket.price }} EGP</span>
                  <button class="btn btn-sm btn-outline-danger fs-6">Buy Now</button>
                </div>
              </div>
            </div>

          </div>
        </div>


        <hr class="mt-4">
      </div>
    </div>
  </section>


  <section id="cast" style="min-height: 50vh;">
    <h2>Cast</h2>
    <p>List of performers...</p>
  </section>


  <section id="terms-conditions" class="mt-3 p-2">
    <!-- Section Title -->
    <h2 class="mb-3">
      <i class="bi bi-file-text-fill text-danger me-2"></i>
      <span class="heading-line">Terms & Conditions</span>
    </h2>


    <div class="ps-5 row justify-content-center ">

      <div class="col-lg-12 ">
        <div class="terms-list card border-0 shadow-sm hover-shadow-lg  transition-all pb-5">
          <div class="card-body pb-2">
            <ul class="list-unstyled m-0 row g-4">
              <li class="col-md-6 d-flex">
                <div class="term-item pe-3">
                  <i class="bi bi-x-octagon-fill text-danger fs-3 me-3"></i>
                </div>
                <div>
                  <h5 class="text-dark mb-2">Non-Transferable Tickets</h5>
                  <p class="text-muted mb-0">Tickets are non-refundable and non-transferable under any circumstances
                  </p>
                </div>
              </li>

              <li class="col-md-6 d-flex">
                <div class="term-item pe-3">
                  <i class="bi bi-person-fill-check text-primary fs-3 me-3"></i>
                </div>
                <div>
                  <h5 class="text-dark mb-2">Entry Policy</h5>
                  <p class="text-muted mb-0">Strict one ticket per person policy with no re-entry after scanning</p>
                </div>
              </li>

              <li class="col-md-6 d-flex">
                <div class="term-item pe-3">
                  <i class="bi bi-shield-fill-check text-success fs-2 me-3"></i>
                </div>
                <div>
                  <h5 class="text-dark mb-2">Security Screening</h5>
                  <p class="text-muted mb-0">Mandatory security checks for all attendees</p>
                </div>
              </li>

              <li class="col-md-6 d-flex">
                <div class="term-item pe-3">
                  <i class="bi bi-cup-straw text-warning fs-2 me-3"></i>
                </div>
                <div>
                  <h5 class="text-dark mb-2">Prohibited Items</h5>
                  <p class="text-muted mb-0">No outside food, drinks, or restricted items allowed</p>
                </div>
              </li>

              <li class="col-md-6 d-flex">
                <div class="term-item pe-3">
                  <i class="bi bi-person-hearts text-info fs-3 me-3"></i>
                </div>
                <div>
                  <h5 class="text-dark mb-2">Child Policy</h5>
                  <p class="text-muted mb-0">Children under 12 must be accompanied by an adult</p>
                </div>
              </li>
              <li class="col-md-6  d-flex">
                <div class="term-item pe-3">
                  <i class="bi bi-exclamation-octagon-fill text-purple fs-3 me-3"></i>
                </div>
                <div>
                  <h5 class="text-dark mb-2">Right to Refuse Entry</h5>
                  <p class="text-muted mb-0">Management reserves the right to refuse admission without reason</p>
                </div>
              </li>
            </ul>

          </div>

        </div>
      </div>
      <hr class="mt-4">
    </div>

  </section>


  <section id="reviews" class="p-4">
    <!-- Section Heading -->
    <h2 class="mb-4">
      <i class="bi bi-chat-dots-fill text-danger me-2"></i>
      <span class="heading-line">Reviews</span>
    </h2>

    <!-- Review List Container -->
    <div class="review-container p-3 border rounded  shadow-sm ms-5"
      style="width: 97%; max-height: 400px; overflow-y: auto;">

      <!-- Review Cards (Vertical Layout) -->
      <div class="row">
        <div class="col-12 mb-3" *ngFor="let review of reviews">
          <div class="card shadow border-0">
            <div class="card-body">
              <div class="d-flex align-items-center mb-2">
                <i class="bi bi-person-circle text-danger fs-3 me-2"></i>
                <p class="m-0 fs-4">{{ review.user }}</p>
              </div>

              <!-- Star Ratings -->
              <div class="text-warning mb-2 fs-6">
                <ng-container *ngFor="let star of [].constructor(5); let i = index">
                  <i class="bi" [ngClass]="{
                                                                                'bi-star-fill': i < Math.floor(review.rating),
                                                                                'bi-star-half': i === Math.floor(review.rating) && review.rating % 1 !== 0,
                                                                                'bi-star': i >= Math.ceil(review.rating)
                                                                              }"></i>
                </ng-container>
              </div>

              <div class="lead text-justify fw-light fst-italic small fs-5">{{ review.comment }}</div>
            </div>
          </div>
        </div>
      </div>

    </div>
    <hr class="mt-4">
  </section>



  <!-- --------------------------------------------------------------------------------------------------------------- -->

  <div id="stop-scroll" class="mt-5">
    <h2 class="fw-bold">
      <i class="bi bi-stars text-danger"></i> YOU MIGHT ALSO LIKE
    </h2>

    <hr>

    <!-- Scroll Buttons -->
    <div class="scroll-container d-flex">
      <button class="scroll-btn left me-2" (click)="scrollLeft()">&#10094;</button>

      <!-- Scrollable Event List -->
      <div class="event-scroll-wrapper">
        <div class="row flex-nowrap" id="eventContainer">
          @for (event of eventList; track event) {
          <div class="col-md-4 event-card">
            <div class="card shadow-sm position-relative">
              <img [src]="event.image" class="card-img-top rounded-top" [alt]="event.title">

              <!-- Rating Badge -->
              <span class="position-absolute bg-white text-dark px-3 py-1 rounded fw-bold m-2">
                {{ event.rating }} ★
              </span>

              <div class="card-body text-center">
                <h4 class="fw-bold">{{ event.title }}</h4>
                <div class="mb-1">{{ event.venue }}</div>

                <!-- Star Ratings -->
                <div class="text-danger mb-3 mt-1 fs-5">
                  <ng-container *ngFor="let star of [].constructor(5); let i = index">
                    <i class="bi" [ngClass]="{
                                      'bi-star-fill': i < Math.floor(event.rating),
                                      'bi-star-half': i === Math.floor(event.rating) && event.rating % 1 !== 0,
                                      'bi-star': i >= Math.ceil(event.rating)
                                    }"></i>
                  </ng-container>
                </div>

                <div class="btn btn-light w-100 fw-bold mb-2">
                  <i class="bi bi-calendar3 me-2"></i> {{ event.date }}
                </div>


                <div class="d-flex gap-2 justify-content-center mb-2">
                  <button class="btn btn-light fav-btn d-flex align-items-center w-50 justify-content-center py-2 fs-6"
                    (click)="toggleFavorite(event)">
                    <span class="text-danger">Add to Wishlist </span>
                    <i class="bi ms-2"
                      [ngClass]="event.isFavorite ? 'bi-heart-fill text-danger' : 'bi-heart text-danger'"></i>
                  </button>

                  <a routerLink="/details/5"
                    class="btn btn-light text-danger d-flex align-items-center w-50 justify-content-center fs-6">
                    <i class="bi bi-info-circle me-2"></i> More Info
                  </a>

                </div>

                <a class="btn btn-danger w-100 mt-2 py-2">
                  <i class="bi bi-ticket me-2"></i> BOOK TICKETS
                </a>
              </div>
            </div>
          </div>
          }
        </div>
      </div>

      <button class="scroll-btn right ms-2" (click)="scrollRight()">&#10095;</button>
    </div>
  </div>
</div>